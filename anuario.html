<!DOCTYPE html>
<html>
<head>
    <title>Image Text Overlay</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  
</head>
<body>
    <input type="text" id="textInput" placeholder="Enter your text here">
    </select>
    <button onclick="generateImage()">Generate Image</button>
    <canvas id="canvas" style="display:none;"></canvas>
    <a id="downloadLink" style="display:none;">Download</a>

    function generateImage() {
    const text = document.getElementById('textInput').value;
    const fontSize = 48;
    const imageInput = '/anuario/arquivo_base';
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    if (imageInput.files && imageInput.files[0]) {
        const reader = new FileReader();

        reader.onload = function(e) {
            const img = new Image();
            img.onload = function() {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                ctx.font = `bold ${fontSize} Poppins`; // Now using Poppins font
                ctx.fillStyle = '#03589b';
                ctx.fillText(text, 152, 1072); // You can adjust positioning

                createDownloadLink(canvas.toDataURL('image/png'));
            };
            img.src = e.target.result;
        };

        reader.readAsDataURL(imageInput.files[0]);
    }
}

function createDownloadLink(dataUrl) {
    const link = document.getElementById('downloadLink');
    link.href = dataUrl;
    link.download = 'modified-image.png';
    link.style.display = 'block';
    link.textContent = 'Download Image';
}

</body>
</html>
